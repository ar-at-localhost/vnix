#+title: Vnix
#+author: Ahmad Raza <pro.se.ahmad.raza.1@gmail.com>

* TODO: Improve basic workflows
  There are certain features lacking basic expectations, those should be consider to be available ASAP.
** TODO Create a workspace on the fly
   Let the user quickly create a new workspace.
   - Allow to choose Layouts.
   - Allow to choose basic options:
     - Name
     - CWD

** IDEA Persist current workspace state
   If user makes changes to the running panes, i.e. deleting a pane, tab or workspace,
   it is currently only affecting the session and upon next session, it is restored from
   workspaces's file. That's perfect to make things persistance, however has an undesired
   side-effect or losing decisions.

   There should be some way to persist back the current state.
   One way would be to patch the workspace's file (a ~JSON~) but
   would defeat the declarations of Nix's workspace file specs.

   Maybe we can choose between the two:
   A. Let the user forcefully overwise the workspace's file.
   B. Update the user specified Nix module to persist declarations back.

   For example, I've many workspaces declared through Nix. While at run-time,
   I find a tab unnecessary and just delete it. Next time I run Vnix, it is back,
   since it did affect the state, but not workspace's file. How to persist such
   an action?
   - Provide a shortcut to persist to currently set workspace file.
   - Allow user to choose the Nix module location, where it keeps its declartion,
     upon certain action, generate a nix expression (attrSet) translated from
     current state to Nix specs. User can re-build it later to persist the decisions.
     This will also let the user actually review its decision before committing.
     This is quite ackward solution, but it aligns with VNix philosphy of declarative
     workspaces and separation of concern between run-time state and declrations.
* TODO Introduce tags :feat:workspaces:filters:
  The workspaces / tabs / panes should've tags associated to quickly filter by tags.
  DEADLINE: [2026-03-01 Sun]

* TODO Introduce quick filter in Snacks Pane picker :feat:panes:filters:
  Snacks pane picker should allow from quick search through Workspaces / Tabs / Panes.
  - ~ALT+w~ Reduce results to 1 per workspaces
  - ~ALT+t~ Reduce results to tabs in active workspace, or ~w>~ where ~w~ is the target workspace.
  DEADLINE: [2026-03-01 Sun]

* TODO Supercharge Org Mode :feat:orgmode:
  Mixing Nivm orgmode with Vnix can bring some good features, especially for *DEV* workspaces.
  This can allow user to select / track tasks on various worskpaces.
  Non-dev workspaces can actually utilize user's global org files for tasking.
** TODO Org Captures :feat:orgmode:agenda:
   - Introduce Org-mode keybindings
     - ~<L>oc~ Capture
       *DEV* Workspace: Capture task to workspace's notes file.
       *!DEV* Workspace: If non-dev workspace, capture to user's level notes file.
** TODO Org Agenda :feat:orgmode:agenda:
   - Introduce Org-mode keybindings
     - ~<L>oa~ Quick Agenda view for current week
     - ~<L>oA~ Agenda prompt
** TODO Task Tracking :feat:orgmode:clock:

*** TODO Show clock status
    Status bar should be display some status regarding clocking.
    - If it is clocked in to some task, show clock & time tracked so far.
    - If it isn't yet clocked-in, show Paused status (to encourage selecting a task)
    - Allow explicit pause of the time tracker.

    Keybindings:
    - ~<L>ot~ Switch task (workspace local)
      - Can be used to explore tasks, without having to switch (by pressing ~ESC~).
	This can be useful to glance through tasks, using Snacks Picker.
    - ~<L>oc~ Toggle Clock-in / Clock-out (workspace local)
*** TODO Task prompt
   Upon visiting workspace for the first time, it might be wise to prompt for the task.
   - If user prefers a tasks (or creates a new one) Clock into it.
      - Respect user's choice not to clock in.
      - Respect user's choice if clock is explicity disabled.
   - If it is a Non-Dev workspace, create task in user's global tasks / notes files (~$HOME/.vnix/orgfiles/notes.org~).
** TODO Allow specifying notes files
   It might be useful to let the user choose the org-file path, especially with non-dev workspaces.
